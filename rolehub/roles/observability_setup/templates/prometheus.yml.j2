global:
  scrape_interval: 15s
  evaluation_interval: 30s
  external_labels:
    monitor: prom

scrape_configs:
- job_name: 'prometheus'
  static_configs:
  - targets: [ 'localhost:9090' ]
- job_name: 'node'
  static_configs:
  - targets: [ 'node-exporter:9100' ]
- job_name: 'blackbox-icmp'
  metrics_path: /probe
  params:
    module: [ icmp_ipv4 ]
  static_configs:
  - targets:
    - localhost
    - 172.30.10.33
    - 172.30.13.33
    - 172.30.14.33
    - 172.30.15.33
    - 172.30.16.33
    - 172.30.17.33
    - 172.30.18.33
    - 31.7.78.127
    - 172.16.154.99
    - 172.16.253.101
    - 172.16.253.102
    - 172.16.253.103
    - 172.16.253.104
    - 172.16.253.105
    - 172.16.253.106
    - 172.16.253.107
    - 172.16.253.108
    - 172.16.253.109
    - 172.16.253.110
    - 172.16.253.111
  relabel_configs:
  - source_labels: [ __address__ ]
    target_label: __param_target
  - source_labels: [ __param_target ]
    target_label: instance
  - target_label: __address__
    replacement: blackbox-exporter:9115
- job_name: freeswitch
  scrape_interval: 5s
  static_configs:
  - targets: [ '10.10.10.16:9282' ]
  metrics_path: /metrics
  relabel_configs:
  # This relabeling sets the instance to the target address instead of the address of the exporter
  - source_labels: [ __address__ ]
    target_label: __param_target
  - source_labels: [ __param_target ]
    target_label: instance
  - target_label: __address__
    replacement: 10.10.10.16:9282
