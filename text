CREATE USER 'replication'@'%' IDENTIFIED BY 'arvan-replica';

ALTER USER 'replication'@'%' IDENTIFIED BY 'arvan-replica';





GRANT REPLICATION SLAVE ON *.* TO 'replication'@'%';



CHANGE MASTER TO
  MASTER_HOST='mysql-master-svc',
  MASTER_USER='replication',
  MASTER_PASSWORD='arvan-replica',
  MASTER_AUTO_POSITION = 1;


  CREATE TABLE Persons (
    PersonID int,
    LastName varchar(255),
    FirstName varchar(255),
    Address varchar(255),
    City varchar(255)
);

CREATE TABLE authors (id INT, name VARCHAR(20), email VARCHAR(20));
INSERT INTO authors (id,name,email) VALUES(1,"Vivek","xuz@abc.com");





DROP USER IF EXISTS 'mysqld_exporter'@'127.0.0.1';
DROP USER IF EXISTS 'mysqld_exporter'@'::1';
DROP USER IF EXISTS 'mysqld_exporter'@'localhost';
CREATE USER 'mysqld_exporter'@'127.0.0.1' IDENTIFIED BY 'exporter';
CREATE USER 'mysqld_exporter'@'::1'       IDENTIFIED BY 'exporter';
CREATE USER 'mysqld_exporter'@'localhost' IDENTIFIED BY 'exporter';
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'mysqld_exporter'@'127.0.0.1';
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'mysqld_exporter'@'::1';
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'mysqld_exporter'@'localhost';
FLUSH PRIVILEGES;






  filebeat setup --index-management --pipelines --dashboards -e \
  -E output.elasticsearch.hosts=["http://elasticsearch:9200"] \
  -E output.elasticsearch.username=elastic \
  -E output.elasticsearch.password='lh7e3n3GJ2TVso3WWlXc0IOSZOJ39HlWwCu4gYK8LwYd3emUZE' \
  -E setup.kibana.host=http://kibana:5601 \
  -E setup.kibana.username=elastic \
  -E setup.kibana.password='lh7e3n3GJ2TVso3WWlXc0IOSZOJ39HlWwCu4gYK8LwYd3emUZE'




# this is fuckly great 
remember to user docker exec in ansible to provision dashboards